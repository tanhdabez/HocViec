@model List<Infrastructure.Models.ChiTietHoaDon>

<div class="container mt-5">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h2 class="mb-0">Chi tiết đơn hàng</h2>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table text-center">
                    <thead>
                        <tr>
                            <th>Ảnh sản phẩm</th>
                            <th>Tên sản phẩm</th>
                            <th>Số lượng</th>
                            <th>Giá tiền</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @{
                                        var firstImage = item.SanPham?.AnhSanPhams?.FirstOrDefault();
                                        if (firstImage != null)
                                        {
                                            <img src="@firstImage.ImageUrl" alt="Ảnh sản phẩm" class="img-thumbnail" width="80" height="80" />
                                        }
                                        else
                                        {
                                            <span class="text-muted">Không có ảnh</span>
                                        }
                                    }
                                </td>
                                <td>@item.SanPham?.Ten</td>
                                <td>@item.SoLuong</td>
                                <td>@item.DonGia.ToString("N0") VND</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="mt-3 text-end">
                <h4>
                    Tổng tiền:
                    <span class="text-danger">@Model.Sum(item => item.DonGia * item.SoLuong).ToString("N0") VND</span>
                </h4>
            </div>
        </div>
    </div>
</div>